<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | ARV Logam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#b91c1c', // Merah gelap
              metal: '#e5e7eb'   // Abu metalik
            }
          }
        }
      };
    </script>
</head>
<body class="bg-metal dark:bg-gray-900 text-gray-800 dark:text-white font-sans">
    <!-- Navbar -->
    <nav class="bg-primary text-white px-4 py-3 flex justify-between items-center">
        <div class="font-bold text-xl">
            Welcome, {{ username }}!
        </div>
        <div class="space-x-4">
            <a href="/" class="hover:underline">Beranda</a>
            <a href="/barang" class="hover:underline">Kelola Barang</a>
            <a href="/user" class="hover:underline">Kelola User</a>
            <a href="/akun" class="hover:underline">Kelola Akun</a>
        </div>
    </nav>

    <!-- Welcome Banner -->
    <section class="m-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
        <div class="flex items-center space-x-4">
            <img src="{{ url_for('static', filename='logo-arv.png') }}" alt="Logo ARV" class="h-12 w-12" />
            <div>
                <p class="text-lg">Selamat datang kembali, di Sistem Management <strong>ARV LOGAM</strong></p>
                <p id="jam" class="text-sm text-gray-500 dark:text-gray-400">⏳ {{ waktu }}</p>
            </div>
        </div>
    </section>

    <!-- Tabel Produk -->
    <section class="m-4">
        <h2 class="text-xl font-bold mb-2 text-primary">Daftar Produk</h2>
        <div class="overflow-x-auto rounded-lg shadow">
            <table class="min-w-full border-collapse bg-white dark:bg-gray-800">
                <thead>
                    <tr class="bg-red-100 text-red-700 text-left text-sm uppercase">
                        <th class="p-3">No</th>
                        <th class="p-3">Nama Barang</th>
                        <th class="p-3">Harga/Kg</th>
                        <th class="p-3">Deskripsi</th>
                        <th class="p-3">Tanggal Dibuat</th>
                        <th class="p-3">Tanggal Update</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, b in enumerate(barang, start=1) %}
                    <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
                        <td class="p-3">{{ index }}</td>
                        <td class="p-3">{{ b.nama_barang }}</td>
                        <td class="p-3">{{ "{:,.2f}".format(b.harga_kg) }}</td>
                        <td class="p-3">{{ b.deskripsi }}</td>
                        <td class="p-3">{{ b.tanggal_dibuat.strftime("%d-%m-%Y %H:%M") }}</td>
                        <td class="p-3">{{ b.tanggal_update.strftime("%d-%m-%Y %H:%M") }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <!-- Dark Mode Toggle -->
    <div class="fixed bottom-4 right-4">
        <button onclick="document.documentElement.classList.toggle('dark')" class="bg-primary text-white p-2 rounded-full shadow-lg hover:bg-red-700">
            <i class="fas fa-adjust"></i>
        </button>
    </div>

    <!-- Jam Dinamis -->
    <script>
        function updateJam() {
            const now = new Date();
            const formatted = now.toLocaleString('id-ID', {
                day: '2-digit', month: '2-digit', year: 'numeric',
                hour: '2-digit', minute: '2-digit', second: '2-digit'
            });
            document.getElementById('jam').textContent = `⏳ ${formatted}`;
        }
        setInterval(updateJam, 1000);
        updateJam();
    </script>
</body>
</html>
