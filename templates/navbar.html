<!-- templates/navbar.html -->
<!-- templates/navbar.html -->
<header class="sticky top-0 z-50 bg-white border-b border-neutral-200 bg-white/90 backdrop-blur">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">

    <!-- Logo -->
    <a href="{{ url_for('dashboard') }}" class="flex items-center gap-2">
      <img src="{{ url_for('static', filename='img/logo.PNG') }}" alt="Logo" class="h-8 w-auto">
      <span class="font-bold text-red-600 hidden sm:inline">ARV LOGAM</span>
    </a>

    <!-- Menu kanan -->
    <div class="flex items-center gap-4">
      <span class="text-sm text-neutral-700">Halo, {{ nama|default('Pengguna') }}</span>
      <a href="{{ url_for('logout') }}" class="text-sm text-red-600 hover:underline">Keluar</a>
    </div>

  </div>
</header>


<script>
  // Toggle & auto-close dropdown
  (function () {
    const adminBtn  = document.getElementById('btnAdmin');
    const adminMenu = document.getElementById('menuAdmin');
    const userBtn   = document.getElementById('btnUser');
    const userMenu  = document.getElementById('menuUser');

    const hideAll = () => {
      if (adminMenu) adminMenu.classList.add('hidden');
      if (userMenu)  userMenu.classList.add('hidden');
    };

    if (adminBtn && adminMenu) {
      adminBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        adminMenu.classList.toggle('hidden');
        if (userMenu) userMenu.classList.add('hidden');
      });
    }

    if (userBtn && userMenu) {
      userBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        userMenu.classList.toggle('hidden');
        if (adminMenu) adminMenu.classList.add('hidden');
      });
    }

    // Klik di luar -> tutup
    document.addEventListener('click', (e) => {
      const inAdmin = e.target.closest('[data-admin-menu]');
      const inUser  = e.target.closest('[data-user-menu]');
      if (!inAdmin && !inUser) hideAll();
    });

    // Tekan Esc -> tutup
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') hideAll();
    });

    // Klik item pada dropdown -> tutup
    document.querySelectorAll('.nav-close').forEach(a => {
      a.addEventListener('click', () => hideAll());
    });
  })();
</script>
