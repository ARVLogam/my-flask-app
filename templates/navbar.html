<!-- templates/navbar.html -->
<nav class="sticky top-0 z-50 bg-white/95 backdrop-blur border-b border-gray-200">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">

    <!-- kiri: logo + link beranda -->
    <a href="{{ url_for('dashboard') }}" class="flex items-center gap-3">
      <img src="{{ url_for('static', filename='img/logo.PNG') }}" alt="Logo" class="h-8 w-auto">
      <span class="font-semibold text-gray-800">ARV LOGAM</span>
    </a>

    <!-- tengah: pencarian (opsional) -->
    <form action="{{ url_for('dashboard') }}" method="get" class="hidden md:block w-full max-w-xl mx-6">
      <input name="q" type="text" placeholder="Cari produk..."
             class="w-full rounded-xl border border-gray-300 bg-white px-4 h-10 focus:outline-none focus:ring-2 focus:ring-red-500">
    </form>

    <!-- kanan: menu -->
    <div class="flex items-center gap-2">

      {% if role == 'admin' %}
      <!-- menu admin -->
      <details class="relative">
        <summary class="list-none inline-flex items-center gap-2 px-3 h-10 rounded-lg bg-red-600 text-white cursor-pointer hover:bg-red-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
          Admin
        </summary>
        <div class="absolute right-0 mt-2 w-56 rounded-xl border border-gray-200 bg-white shadow-lg overflow-hidden">
          <a class="block px-4 py-3 hover:bg-gray-50" href="{{ url_for('menuAdmin', roleMenu='kelolaBarang') }}">Kelola Barang</a>
          <a class="block px-4 py-3 hover:bg-gray-50" href="{{ url_for('menuAdmin', roleMenu='kelolaUser') }}">Kelola User</a>
          <a class="block px-4 py-3 hover:bg-gray-50" href="{{ url_for('editProfile') }}">Edit Profil</a>
        </div>
      </details>
      {% endif %}

      <!-- profil -->
      <details class="relative">
        <summary class="list-none inline-flex items-center gap-3 px-3 h-10 rounded-lg border border-gray-200 bg-white cursor-pointer hover:bg-gray-50">
          <div class="text-right hidden sm:block">
            <div class="text-xs text-gray-500">Halo,</div>
            <div class="text-sm font-medium text-gray-800 truncate max-w-[120px]">{{ nama or 'Pengguna' }}</div>
          </div>
          <img src="{{ url_for('static', filename='img/avatar_default.png') }}"
               class="h-8 w-8 rounded-full ring-1 ring-gray-200" alt="avatar">
        </summary>
        <div class="absolute right-0 mt-2 w-52 rounded-xl border border-gray-200 bg-white shadow-lg overflow-hidden">
          <a class="block px-4 py-3 hover:bg-gray-50" href="{{ url_for('editProfile') }}">Edit Profil</a>
          <a class="block px-4 py-3 text-red-600 hover:bg-red-50" href="{{ url_for('logout') }}">Keluar</a>
        </div>
      </details>

      <!-- toggle search di mobile -->
      <button id="openSearch" class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-lg border border-gray-200 hover:bg-gray-50">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- search bar mobile -->
  <div id="mobileSearch" class="md:hidden hidden px-4 pb-3">
    <form action="{{ url_for('dashboard') }}" method="get">
      <input name="q" type="text" placeholder="Cari produk..."
             class="w-full rounded-xl border border-gray-300 bg-white px-4 h-10 focus:outline-none focus:ring-2 focus:ring-red-500">
    </form>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('openSearch');
    const panel = document.getElementById('mobileSearch');
    if (btn && panel) btn.addEventListener('click', () => panel.classList.toggle('hidden'));
  });
</script>
