{# templates/partials/navbar.html #}
<nav class="bg-white border-b shadow-sm sticky top-0 z-40">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Kiri: Logo -->
      <div class="flex items-center gap-3">
        <a href="{{ url_for('dashboard') }}" class="flex items-center gap-3">
          <img
            src="{{ url_for('static', filename='img/logo.PNG') }}"
            alt="Logo"
            class="h-8 w-auto sm:h-9"
          />
          <span class="hidden sm:inline text-base font-semibold text-gray-800">ARV LOGAM</span>
        </a>
      </div>

      <!-- Tengah: Search -->
      <div class="hidden md:block flex-1 px-6">
        <form action="{{ url_for('dashboard') }}" method="get" class="relative">
          <input
            type="text"
            name="q"
            value="{{ request.args.get('q','') }}"
            placeholder="Cari produk‚Ä¶"
            class="w-full rounded-full border border-gray-300 bg-gray-50 pl-4 pr-10 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
          />
          <button type="submit" class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700">
            üîç
          </button>
        </form>
      </div>

      <!-- Kanan: Menu Cepat -->
      <div class="hidden md:flex items-center gap-3">
        {% if role == 'admin' %}
          <!-- Dropdown Admin (tanpa JS pakai <details>) -->
          <details class="relative">
            <summary class="list-none cursor-pointer inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 select-none">
              Kelola
              <span class="text-xs opacity-90">‚ñº</span>
            </summary>
            <div class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg ring-1 ring-black/5 overflow-hidden">
              <a href="{{ url_for('menuAdmin', roleMenu='kelolaBarang') }}" class="block px-4 py-2 text-sm hover:bg-gray-50">Kelola Barang</a>
              <a href="{{ url_for('addBarang') }}" class="block px-4 py-2 text-sm hover:bg-gray-50">+ Tambah Barang</a>
              <a href="{{ url_for('menuAdmin', roleMenu='kelolaUser') }}" class="block px-4 py-2 text-sm hover:bg-gray-50">Kelola User</a>
              <div class="h-px bg-gray-100"></div>
              <a href="{{ url_for('editProfile') }}" class="block px-4 py-2 text-sm hover:bg-gray-50">Edit Profil</a>
            </div>
          </details>
        {% endif %}

        <!-- Profil / Auth -->
        <details class="relative">
          <summary class="list-none cursor-pointer inline-flex items-center gap-3 px-3 py-2 rounded-full border border-gray-200 hover:bg-gray-50">
            <span class="hidden sm:block text-sm text-gray-700">Halo, {{ nama or 'Pengguna' }}</span>
            <img src="{{ url_for('static', filename='img/avatar.png') }}"
                 onerror="this.src='https://ui-avatars.com/api/?name={{ (nama or 'User')|urlencode }}&background=ef4444&color=fff&size=64'"
                 alt="Avatar" class="h-8 w-8 rounded-full object-cover">
            <span class="text-xs text-gray-500">‚ñº</span>
          </summary>
          <div class="absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg ring-1 ring-black/5 overflow-hidden">
            <a href="{{ url_for('editProfile') }}" class="block px-4 py-2 text-sm hover:bg-gray-50">Edit Profil</a>
            <div class="h-px bg-gray-100"></div>
            <a href="{{ url_for('logout') }}" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Keluar</a>
          </div>
        </details>
      </div>

      <!-- Tombol Mobile -->
      <details class="md:hidden relative">
        <summary class="list-none cursor-pointer inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 hover:bg-gray-50">
          Menu <span class="text-xs text-gray-500">‚ñº</span>
        </summary>
        <div class="absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg ring-1 ring-black/5 overflow-hidden p-2">
          <form action="{{ url_for('dashboard') }}" method="get" class="mb-2">
            <input
              type="text" name="q" value="{{ request.args.get('q','') }}"
              placeholder="Cari produk‚Ä¶"
              class="w-full rounded-lg border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
            />
          </form>

          {% if role == 'admin' %}
            <div class="text-xs font-semibold text-gray-400 px-2 pb-1">ADMIN</div>
            <a href="{{ url_for('menuAdmin', roleMenu='kelolaBarang') }}" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Kelola Barang</a>
            <a href="{{ url_for('addBarang') }}" class="block px-3 py-2 rounded-lg hover:bg-gray-50">+ Tambah Barang</a>
            <a href="{{ url_for('menuAdmin', roleMenu='kelolaUser') }}" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Kelola User</a>
            <div class="h-px bg-gray-100 my-2"></div>
          {% endif %}

          <a href="{{ url_for('editProfile') }}" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Edit Profil</a>
          <a href="{{ url_for('logout') }}" class="block px-3 py-2 rounded-lg text-red-600 hover:bg-red-50">Keluar</a>
        </div>
      </details>
    </div>
  </div>
</nav>
